---
import type { CollectionEntry } from "astro:content";
import SectionHeading from "./SectionHeading.astro";
import { getTranslations, type Locale } from "../i18n/translations";

interface Props {
  entries: CollectionEntry<"personal">[];
  locale?: Locale;
}

const { entries, locale = 'en' } = Astro.props as Props;
const t = getTranslations(locale);

const personalEntries = await Promise.all(
  entries.map(async (entry) => {
    const { Content } = await entry.render();
    return { entry, Content };
  })
);
---
<section id="personal" class="py-24">
  <div class="container section-grid">
    <SectionHeading
      eyebrow={t.headings.personalEyebrow}
      title={t.headings.personal}
      description={t.headings.personalDesc}
    />

    <div class="grid gap-10 md:grid-cols-2">
      {personalEntries
        .sort((a, b) => a.entry.data.order - b.entry.data.order)
        .map(({ entry, Content }) => (
          <article class="glass-panel space-y-4 p-8" key={entry.id}>
            <h3 class="font-display text-2xl text-primary">{entry.data.title}</h3>
            <div class="personal-content space-y-3 text-muted">
              <Content />
            </div>
          </article>
        ))}
    </div>
  </div>
</section>
